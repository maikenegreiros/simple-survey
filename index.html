<!DOCTYPE html>
<html>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel='stylesheet' type='text/css' href='css/index.css'>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    </head>

    <body>
        <div class="danger">
            <p><strong></strong> </p>
        </div>
        <div class="danger">
            <strong></strong>
        </div>
        <div class="header">
            <div class="left">
                <img src="./image.jpg" alt="logo" />
            </div>
            <div class="right_txt">PwC Survey</div>
            <div class="both"></div>
        </div>
        <div class="center back-color">
            <div class="intro">
                <h2>Welcome to the Performance engineering survey</h2>
                <div class="text">
                    <h2>We're interested in understanding the ecosystem and archetypes of the coliving movement, in order
                        to make it easier to start and operate coliving houses, and to create a picture of the amazing
                        spectrum of these spaces.

                        There is more to performance engineering than just testing. Done right, performance engineering
                        means understanding how all the parts of the system fit together, and building in performance from
                        the first design.
                    </h2>
                </div>
                <div>
                    <form class="user-info-form">
                        <!-- Need to at action and method attributes when database is name -->
                        <div class="form-group">
                            <label>*Username: </label>
                            <input type="text" name="username" required class="form-control">
                        </div>
                        <div class="form-group">
                            <label>*Email:</label>
                            <input type="email" class="email-input form-control" name="email" required>
                        </div>
                        <div class="form-group">
                            <label>*Organization:</label>
                            <input type="text" name="organization" required class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Mobile Number (optional)</label>
                            <input type="tel" name="mobile" class="mobile-num form-control allownumericwithoutdecimal">
                        </div>
                        <button type="button" class="btn btn-default save-user-info">Save</button>
                    </form>
                    <center>
                        <a href="./FirstPage.html">Take the Survey</a> ||
                        <a href="./privacy.html">Read the Privacy Statement</a>
                    </center>
                </div>
            </div>
        </div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
        <script>
            $(document).ready(function () {
                $(".save-user-info").click(function () {

                    var valid = true;

                    $("input[required]").each(function () {
                        var v = $(this).val();
                        if (v.length < 1) {
                            valid = false;
                            return false;
                        }
                    });

                    var isnum = true;
                    var mobile = $(".mobile-num").val();
                    if (mobile.length > 0) {
                        isnum = /^\d+$/.test(mobile);
                    }

                    if (!valid || !window.validateEmail($(".email-input")) || !isnum) {
                        alert("not valid");
                        return;
                    }



                });

                window.validateEmail = function (emailInput) {
                    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                    validEmail = regex.test(emailInput.val());
                    if (validEmail) {
                        console.log("valid")
                        return true;
                    } else {
                        //error
                        console.log("fake news")
                        return false;
                    }
                }
                $(".allownumericwithoutdecimal").on("keypress keyup blur", function (event) {
                    //$(this).val($(this).val().replace(/[^\d].+/, ""));
                    // console.log(event.which)

                    var dashAllowed = 0; //default, don't allow dashes
                    if ($(this).hasClass("phonenumber")) {
                        dashAllowed = 45;
                    }

                    var fowardslashAllowed = 0; //default, don't allow forward slash
                    if ($(this).hasClass("mmyy")) {

                        // console.log($(this).val().length)
                        if (event.keyCode != 8) { //gaurd against backspaces
                            if ($(this).val().length === 2) {
                                fowardslashAllowed = 47;
                                if (event.keyCode != 47) { //in case they enter slash themself
                                    var thisVal = $(this).val();
                                    thisVal += '/';
                                    $(this).val(thisVal);
                                }
                            }
                        }
                    }

                    // console.log("event.which: " + event.which)

                    //allow tabs! (needed for firefox)
                    if (event.which !== 8 && event.which !== dashAllowed && event.which !== 0 && event.which !== fowardslashAllowed) { //backspace, dash, tab, forward slash
                        if ((event.which < 48 || event.which > 57)) {
                            event.preventDefault();
                        }
                    }

                });

            });

        </script>

    </body>
</html>
